<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Nlyte QR Code Generator ðŸ˜Ž</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 flex flex-col items-center justify-center min-h-screen relative">
    <h1 class="text-4xl font-bold mb-6">
        Nlyte QR Code <span class="text-blue-500">Generator</span> ðŸ˜Ž
    </h1>
    <div id="code" class="text-3xl font-mono bg-white p-4 rounded shadow mb-4"></div>
    <div class="flex space-x-4 mb-2">
        <button onclick="copyToClipboard()" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded">
            Copy to Clipboard
        </button>
        <button onclick="generateCode()" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded">
            Generate New Code
        </button>
    </div>
    <div id="confirmation" class="text-green-600 font-semibold mb-4" style="min-height: 24px;"></div>

    <div class="mt-8 w-full max-w-md">
        <h2 class="text-xl font-semibold mb-2">History</h2>
        <ul class="bg-white rounded shadow p-4 space-y-2">
            {% for entry in history %}
            <li class="flex justify-between text-sm text-gray-700">
                <span>{{ entry.code }}</span>
                <span>{{ entry.timestamp.strftime('%Y-%m-%d %H:%M:%S') }}</span>
            </li>
            {% endfor %}
        </ul>
    </div>

    <script>
        async function generateCode() {
            const response = await fetch('/generate');
            const data = await response.json();
            const codeElement = document.getElementById('code');
            codeElement.textContent = data.code;
            copyTextToClipboard(data.code);
        }

        function copyToClipboard() {
            const code = document.getElementById('code').textContent;
            copyTextToClipboard(code);
        }

        function copyTextToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                const confirmation = document.getElementById('confirmation');
                confirmation.textContent = 'Code copied to clipboard!';
                setTimeout(() => {
                    confirmation.textContent = '';
                }, 3000);
            });
        }

        window.onload = generateCode;
    </script>
</body>
</html>
